<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8" />
      <title>ch3</title>
      <style>html {font-size: 12px}.markdown-preview { font-family: 'Helvetica Neue', Helvetica, sans-serif; font-size: 14px; line-height: 1.6; overflow: scroll; box-sizing: border-box; padding: 20px; background-color: rgb(255, 255, 255); }
.markdown-preview code { color: rgb(51, 51, 51); }
.markdown-preview code, .markdown-preview tt, .markdown-preview pre.editor-colors { font-size: 12px; font-family: Consolas, 'Liberation Mono', Courier, monospace; }
.markdown-preview a, .markdown-preview a code { color: rgb(65, 131, 196); }
.markdown-preview ol > li { list-style-type: decimal; }
.markdown-preview ul > li { list-style-type: disc; }
.markdown-preview li > pre.editor-colors { display: inline-block; vertical-align: top; width: 100%; }
.markdown-preview li:last-child > pre.editor-colors { margin-bottom: 0px; }
.markdown-preview > :first-child { margin-top: 0px !important; }
.markdown-preview > :last-child { margin-bottom: 0px !important; }
.markdown-preview a.absent { color: rgb(204, 0, 0); }
.markdown-preview a.anchor { display: block; padding-left: 30px; margin-left: -30px; cursor: pointer; position: absolute; top: 0px; left: 0px; bottom: 0px; }
.markdown-preview h1, .markdown-preview h2, .markdown-preview h3, .markdown-preview h4, .markdown-preview h5, .markdown-preview h6 { font-family: 'Helvetica Neue', Helvetica, sans-serif; margin: 20px 0px 10px; padding: 0px 0px 10px; font-weight: bold; -webkit-font-smoothing: antialiased; cursor: text; position: relative; }
.markdown-preview h1 .octicon-link, .markdown-preview h2 .octicon-link, .markdown-preview h3 .octicon-link, .markdown-preview h4 .octicon-link, .markdown-preview h5 .octicon-link, .markdown-preview h6 .octicon-link { display: none; color: rgb(0, 0, 0); }
.markdown-preview h1:hover a.anchor, .markdown-preview h2:hover a.anchor, .markdown-preview h3:hover a.anchor, .markdown-preview h4:hover a.anchor, .markdown-preview h5:hover a.anchor, .markdown-preview h6:hover a.anchor { text-decoration: none; line-height: 1; padding-left: 0px; margin-left: -22px; top: 15%; }
.markdown-preview h1:hover a.anchor .octicon-link, .markdown-preview h2:hover a.anchor .octicon-link, .markdown-preview h3:hover a.anchor .octicon-link, .markdown-preview h4:hover a.anchor .octicon-link, .markdown-preview h5:hover a.anchor .octicon-link, .markdown-preview h6:hover a.anchor .octicon-link { display: inline-block; }
.markdown-preview h1 tt, .markdown-preview h2 tt, .markdown-preview h3 tt, .markdown-preview h4 tt, .markdown-preview h5 tt, .markdown-preview h6 tt, .markdown-preview h1 code, .markdown-preview h2 code, .markdown-preview h3 code, .markdown-preview h4 code, .markdown-preview h5 code, .markdown-preview h6 code { font-size: inherit; }
.markdown-preview h1 { font-size: 28px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); color: rgb(0, 0, 0); }
.markdown-preview h2 { font-size: 24px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(238, 238, 238); color: rgb(0, 0, 0); }
.markdown-preview h3 { font-size: 18px; }
.markdown-preview h4 { font-size: 16px; }
.markdown-preview h5 { font-size: 14px; }
.markdown-preview h6 { color: rgb(119, 119, 119); font-size: 14px; }
.markdown-preview p, .markdown-preview blockquote, .markdown-preview ul, .markdown-preview ol, .markdown-preview dl, .markdown-preview table, .markdown-preview pre.editor-colors { margin: 15px 0px; }
.markdown-preview hr { border: 0px none; color: rgb(204, 204, 204); height: 4px; padding: 0px; margin: 15px 0px; background: url('data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC') 0px 0px repeat-x transparent; }
.markdown-preview > h2:first-child, .markdown-preview > h1:first-child, .markdown-preview > h1:first-child + h2, .markdown-preview > h3:first-child, .markdown-preview > h4:first-child, .markdown-preview > h5:first-child, .markdown-preview > h6:first-child { margin-top: 0px; padding-top: 0px; }
.markdown-preview a:first-child h1, .markdown-preview a:first-child h2, .markdown-preview a:first-child h3, .markdown-preview a:first-child h4, .markdown-preview a:first-child h5, .markdown-preview a:first-child h6 { margin-top: 0px; padding-top: 0px; }
.markdown-preview h1 + p, .markdown-preview h2 + p, .markdown-preview h3 + p, .markdown-preview h4 + p, .markdown-preview h5 + p, .markdown-preview h6 + p { margin-top: 0px; }
.markdown-preview li p.first { display: inline-block; }
.markdown-preview ul, .markdown-preview ol { padding-left: 30px; }
.markdown-preview ul.no-list, .markdown-preview ol.no-list { list-style-type: none; padding: 0px; }
.markdown-preview ul li > :first-child, .markdown-preview ol li > :first-child, .markdown-preview ul li ul:first-of-type, .markdown-preview ol li ul:first-of-type { margin-top: 0px; }
.markdown-preview ul ul, .markdown-preview ul ol, .markdown-preview ol ol, .markdown-preview ol ul { margin-bottom: 0px; }
.markdown-preview dl { padding: 0px; }
.markdown-preview dl dt { font-size: 14px; font-weight: bold; font-style: italic; padding: 0px; margin: 15px 0px 5px; }
.markdown-preview dl dt:first-child { padding: 0px; }
.markdown-preview dl dt > :first-child { margin-top: 0px; }
.markdown-preview dl dt > :last-child { margin-bottom: 0px; }
.markdown-preview dl dd { margin: 0px 0px 15px; padding: 0px 15px; }
.markdown-preview dl dd > :first-child { margin-top: 0px; }
.markdown-preview dl dd > :last-child { margin-bottom: 0px; }
.markdown-preview blockquote { border-left-width: 4px; border-left-style: solid; border-left-color: rgb(221, 221, 221); padding: 0px 15px; color: rgb(119, 119, 119); }
.markdown-preview blockquote > :first-child { margin-top: 0px; }
.markdown-preview blockquote > :last-child { margin-bottom: 0px; }
.markdown-preview blockquote p { font-size: 16px; line-height: 1.5; }
.markdown-preview table th { font-weight: bold; }
.markdown-preview table th, .markdown-preview table td { border: 1px solid rgb(204, 204, 204); padding: 6px 13px; }
.markdown-preview table tr { border-top-width: 1px; border-top-style: solid; border-top-color: rgb(204, 204, 204); background-color: rgb(255, 255, 255); }
.markdown-preview table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
.markdown-preview img { max-width: 100%; }
.markdown-preview span.frame { display: block; overflow: hidden; }
.markdown-preview span.frame > span { border: 1px solid rgb(221, 221, 221); display: block; float: left; overflow: hidden; margin: 13px 0px 0px; padding: 7px; width: auto; }
.markdown-preview span.frame span img { display: block; float: left; }
.markdown-preview span.frame span span { clear: both; color: rgb(51, 51, 51); display: block; padding: 5px 0px 0px; }
.markdown-preview span.align-center { display: block; overflow: hidden; clear: both; }
.markdown-preview span.align-center > span { display: block; overflow: hidden; margin: 13px auto 0px; text-align: center; }
.markdown-preview span.align-center span img { margin: 0px auto; text-align: center; }
.markdown-preview span.align-right { display: block; overflow: hidden; clear: both; }
.markdown-preview span.align-right > span { display: block; overflow: hidden; margin: 13px 0px 0px; text-align: right; }
.markdown-preview span.align-right span img { margin: 0px; text-align: right; }
.markdown-preview span.float-left { display: block; margin-right: 13px; overflow: hidden; float: left; }
.markdown-preview span.float-left span { margin: 13px 0px 0px; }
.markdown-preview span.float-right { display: block; margin-left: 13px; overflow: hidden; float: right; }
.markdown-preview span.float-right > span { display: block; overflow: hidden; margin: 13px auto 0px; text-align: right; }
.markdown-preview code, .markdown-preview tt { margin: 0px 2px; padding: 0px 5px; border: 1px solid rgb(234, 234, 234); border-radius: 3px; text-shadow: none; background-color: rgb(248, 248, 248); }
.markdown-preview pre.editor-colors { font-size: 13px; line-height: 19px; overflow: auto; padding: 6px 10px; border-radius: 3px; border: 1px solid rgb(224, 224, 225); background: rgb(250, 250, 250); }
.markdown-preview kbd { border-radius: 2px; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221) rgb(204, 204, 204) rgb(204, 204, 204) rgb(221, 221, 221); padding: 1px 4px; line-height: 10px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; background-image: linear-gradient(rgb(241, 241, 241), rgb(221, 221, 221)); background-color: rgb(221, 221, 221); background-repeat: repeat-x; }
.markdown-preview .emoji { height: 20px; width: 20px; }
.markdown-preview { font-size: 1.25em; color: rgb(80, 81, 83); background-color: rgb(255, 255, 255); }
.markdown-preview h1, .markdown-preview h2 { color: inherit; border-color: rgb(218, 219, 220); }
.markdown-preview a { color: rgb(20, 146, 255); }
.markdown-preview hr { background-color: rgb(255, 255, 255); }
.markdown-preview blockquote { color: rgb(80, 81, 83); border-left-color: rgba(80, 81, 83, 0.701961); }
.markdown-preview table th, .markdown-preview table td { border-color: rgb(218, 219, 220); }
.markdown-preview table th { background-color: rgb(255, 255, 255); }
.markdown-preview table tr { background-color: rgb(255, 255, 255); }
.markdown-preview table tr:nth-child(2n) { background-color: rgb(247, 247, 247); }
.markdown-preview code { color: rgb(104, 106, 110); border-color: rgb(218, 219, 220); background-color: rgb(247, 247, 247); background-clip: padding-box; }
.markdown-preview pre.editor-colors::shadow .line.cursor-line { background-color: transparent; }
.bracket-matcher .region {
  border-bottom: 1px dotted lime;
  position: absolute;
}

.spell-check-misspelling .region {
  border-bottom: 1px dashed rgba(250, 128, 114, 0.5);
}

pre.editor-colors,
.host {
  background-color: #fafafa;
  color: #545454;
}
pre.editor-colors .line.cursor-line,
.host .line.cursor-line {
  background-color: rgba(56, 75, 112, 0.07);
}
pre.editor-colors .invisible,
.host .invisible {
  color: #545454;
}
pre.editor-colors .cursor,
.host .cursor {
  border-left: 2px solid #528bff;
}
pre.editor-colors .selection .region,
.host .selection .region {
  background-color: #e5e5e6;
}
pre.editor-colors .bracket-matcher .region,
.host .bracket-matcher .region {
  border-bottom: 1px solid #528bff;
  box-sizing: border-box;
  background-color: #eaeaeb;
}
pre.editor-colors .invisible-character,
.host .invisible-character {
  color: rgba(84, 84, 84, 0.4);
}
pre.editor-colors .indent-guide,
.host .indent-guide {
  color: rgba(84, 84, 84, 0.4);
}
pre.editor-colors .wrap-guide,
.host .wrap-guide {
  background-color: rgba(84, 84, 84, 0.4);
}
pre.editor-colors .gutter .line-number,
.host .gutter .line-number {
  color: #969696;
  -webkit-font-smoothing: antialiased;
}
pre.editor-colors .gutter .line-number.git-line-removed:before,
.host .gutter .line-number.git-line-removed:before {
  bottom: -3px;
}
pre.editor-colors .gutter .line-number.git-line-removed:after,
.host .gutter .line-number.git-line-removed:after {
  content: "";
  position: absolute;
  left: 0px;
  bottom: 0px;
  width: 25px;
  border-bottom: 1px dotted rgba(255, 20, 20, 0.5);
  pointer-events: none;
}
pre.editor-colors .gutter .line-number.cursor-line,
.host .gutter .line-number.cursor-line {
  color: #545454;
  background-color: #efeff0;
}
pre.editor-colors .gutter .line-number.cursor-line-no-selection,
.host .gutter .line-number.cursor-line-no-selection {
  background-color: transparent;
}
pre.editor-colors .gutter .line-number .icon-right,
.host .gutter .line-number .icon-right {
  color: #545454;
}
pre.editor-colors .gutter .line-number .icon-right,
.host .gutter .line-number .icon-right {
  color: #545454;
}
pre.editor-colors .gutter .line-number.folded,
.host .gutter .line-number.folded,
pre.editor-colors .gutter .line-number:after,
.host .gutter .line-number:after,
pre.editor-colors .fold-marker:after,
.host .fold-marker:after {
  color: #545454;
}
.comment {
  color: #7b7b79;
  font-style: italic;
}
.entity.name.type {
  color: #a58a03;
}
.entity.other.inherited-class {
  color: #428b1c;
}
.keyword {
  color: #a71cce;
}
.keyword.control {
  color: #a71cce;
}
.keyword.operator {
  color: #545454;
}
.keyword.other.special-method {
  color: #1f51eb;
}
.keyword.other.unit {
  color: #893a01;
}
.storage {
  color: #a71cce;
}
.constant {
  color: #893a01;
}
.constant.character.escape {
  color: #0a8560;
}
.constant.numeric {
  color: #893a01;
}
.constant.other.color {
  color: #0a8560;
}
.constant.other.symbol {
  color: #0a8560;
}
.variable {
  color: #bf1212;
}
.variable.interpolation {
  color: #b81332;
}
.variable.parameter.function {
  color: #545454;
}
.invalid.illegal {
  background-color: #bf1212;
  color: #fafafa;
}
.string {
  color: #428b1c;
}
.string.regexp {
  color: #0a8560;
}
.string.other.link {
  color: #bf1212;
}
.punctuation.definition.comment {
  color: #7b7b79;
}
.punctuation.definition.parameters,
.punctuation.definition.array {
  color: #545454;
}
.punctuation.definition.heading,
.punctuation.definition.identity {
  color: #1f51eb;
}
.punctuation.definition.bold {
  color: #a58a03;
  font-weight: bold;
}
.punctuation.definition.italic {
  color: #a71cce;
  font-style: italic;
}
.punctuation.section.embedded {
  color: #b81332;
}
.support.class {
  color: #a58a03;
}
.support.function {
  color: #0a8560;
}
.support.function.any-method {
  color: #1f51eb;
}
.entity.name.function {
  color: #1f51eb;
}
.entity.name.class,
.entity.name.type.class {
  color: #a58a03;
}
.entity.name.section {
  color: #1f51eb;
}
.entity.name.tag {
  color: #bf1212;
}
.entity.other.attribute-name {
  color: #893a01;
}
.entity.other.attribute-name.id {
  color: #1f51eb;
}
.meta.class {
  color: #a58a03;
}
.meta.link {
  color: #893a01;
}
.meta.require {
  color: #1f51eb;
}
.meta.selector {
  color: #a71cce;
}
.meta.separator {
  background-color: #373b41;
  color: #545454;
}
.meta.tag {
  color: #545454;
}
.none {
  color: #545454;
}
.markup.bold {
  color: #893a01;
  font-weight: bold;
}
.markup.changed {
  color: #a71cce;
}
.markup.deleted {
  color: #bf1212;
}
.markup.italic {
  color: #a71cce;
  font-style: italic;
}
.markup.heading .punctuation.definition.heading {
  color: #1f51eb;
}
.markup.inserted {
  color: #428b1c;
}
.markup.list {
  color: #bf1212;
}
.markup.quote {
  color: #893a01;
}
.markup.raw.inline {
  color: #428b1c;
}
.source.gfm .markup {
  -webkit-font-smoothing: auto;
}
.source.gfm .markup.heading {
  color: #bf1212;
}
.source.gfm .markup.link {
  color: #1f51eb;
}
.source.gfm .link .entity {
  color: #0a8560;
}
.ruby.symbol > .punctuation {
  color: inherit;
}
</style>
  </head>
  <body class='markdown-preview'><h1 id="3-working-with-the-database">3. Working with the database</h1>
<p>We are going to be working on the repository that you have created up to this point. If you skipped ahead, don&#39;t worry. You can clone the repository from its Github repository.</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span>$&nbsp;git&nbsp;clone&nbsp;git@github.com:skafandri/symfony-tutorial.git&nbsp;--branch&nbsp;ch2</span></span></div><div class="line"><span class="source shell"><span>Cloning&nbsp;into&nbsp;</span><span class="string quoted single shell"><span class="punctuation definition string begin shell"><span>&#39;</span></span><span>symfony-tutorial</span><span class="punctuation definition string end shell"><span>&#39;</span></span></span><span>...</span></span></div><div class="line"><span class="source shell"><span>remote:&nbsp;Counting&nbsp;objects:&nbsp;57,&nbsp;</span><span class="keyword control shell"><span>done</span></span><span>.</span></span></div><div class="line"><span class="source shell"><span>remote:&nbsp;Total&nbsp;57&nbsp;</span><span class="meta scope subshell shell"><span class="punctuation definition subshell shell"><span>(</span></span><span>delta&nbsp;0</span><span class="punctuation definition subshell shell"><span>)</span></span></span><span>,&nbsp;reused&nbsp;0&nbsp;</span><span class="meta scope subshell shell"><span class="punctuation definition subshell shell"><span>(</span></span><span>delta&nbsp;0</span><span class="punctuation definition subshell shell"><span>)</span></span></span><span>,&nbsp;pack-reused&nbsp;57</span></span></div><div class="line"><span class="source shell"><span>Receiving&nbsp;objects:&nbsp;100%&nbsp;</span><span class="meta scope subshell shell"><span class="punctuation definition subshell shell"><span>(</span></span><span>57/57</span><span class="punctuation definition subshell shell"><span>)</span></span></span><span>,&nbsp;46.98&nbsp;KiB&nbsp;</span><span class="keyword operator pipe shell"><span>|</span></span><span>&nbsp;0&nbsp;bytes/s,&nbsp;</span><span class="keyword control shell"><span>done</span></span><span>.</span></span></div><div class="line"><span class="source shell"><span>Checking&nbsp;connectivity...&nbsp;</span><span class="keyword control shell"><span>done</span></span><span>.</span></span></div></pre>
<p>Don&#39;t forget to <code>composer install</code>.</p>
<h2 id="3-1-database-design">3.1 Database design</h2>
<h3 id="3-1-1-introduction">3.1.1 Introduction</h3>
<p>A study about database design and data structures deserves many books on itself. Therefore, we will try to cover the most common good design practices that can serve as a starting point when designing your application&#39;s requirements data structures.
Database desing is a very important step in software development lifecycle because any design decision can dramatically affect the project&#39;s performance and maintainance cost.<br>At this point we are going to use an RDBMS (Relational database management system). We will talk about other storages engines like noSql later.</p>
<p>When designing a database schema, there are two major questions you should ask yourself:</p>
<ol>
<li><p>How I am going to query the data?<br>Consider the follwing simple table</p>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>user_account`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>login`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>password`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>100</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>email`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB;</span></span></div></pre>
<p>Knowing that I will execute queries like <code>SELECT * from user_account WHERE email like &quot;search_pattern%&quot;</code> I may think about adding an <strong>index</strong> on user_account.email column to speed up this select query. However, if I know that most of the queries will be like <code>SELECT * from user_account WHERE email like &quot;%search_pattern%&quot;</code>, adding an index will have no effect except increasing the table index size.</p>
</li>
<li><p>How the data will be distributed?<br>How many records this table will contain? How many records will have a NULL value in this column? What cardinality this column is going to have? Accurately predicting answers to those questions can be a tricky task. I&#39;ve seen tables designed to hold <em>no more than 10 records</em> that ended up with thousands of entries.</p>
</li>
</ol>
<p>When comparing design variants, there are three metrics that interests the application developer: read speed, update speed, and data storage size. Usually the last one is the least of your concerns, although it can be very important in some situations. You often need to make a balance between read and update speed depending on your application&#39;s needs.</p>
<p>An example comparaison:<br>Benchmark with 5000000 records</p>
<table>
    <tr>
        <th>Variant</th>
        <th>Avg SELECT speed</th>
        <th>Avg UPDATE speed</th>
        <th>Index size</th>
    </tr>
    <tr>
        <td>With index</td>
        <td>50 ms</td>
        <td>800 ms</td>
        <td>250 MB</td>
    </tr>
    <tr>
        <td>Without index</td>
        <td>400 ms</td>
        <td>200 ms</td>
        <td>0</td>
    </tr>
</table>

<p>There is absolutely no generic pattern on making a decision in this case. It solely depends on your specific application&#39;s needs.</p>
<h3 id="3-1-2-data-schema">3.1.2 Data schema</h3>
<p>We are still adopting the target bullet process. That means our first database design is not final and we will eventually update it as needed while going through implementing new features.</p>
<p>For this tutorial, we are going tu use MySQL database server. That said, the SQL syntax will be MySQL.</p>
<ul>
<li>Create the schema</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>SCHEMA</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>&nbsp;DEFAULT&nbsp;CHARACTER&nbsp;</span><span class="keyword other DML sql"><span>SET</span></span><span>&nbsp;utf8;</span></span></div></pre>
<ul>
<li>Category table</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>category`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>&nbsp;AUTO_INCREMENT,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>label`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>parent_category_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_category_category_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>parent_category_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_category_category`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>parent_category_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>category`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION)</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB;</span></span></div></pre>
<p><br></p>
<blockquote>
<p>Whenever you can, take advantage of the dabase server new ID generation strategy for your primary keys (AUTO_INCREMENT for MySQL) You may be tempted to develop your own generation strategy (example: pattern based IDs like &quot;day_date_sequential_number&quot;), don&#39;t. You can have such a column in your table but keep it separate from table <strong>id</strong> key.  </p>
<p>When using auto generated keys, make them <strong>UNSIGNED</strong>. The values will be all positive (by default) so there is no point of deviding your values range by 2. For example the INT type for MySQL has the follwing ranges:</p>
<table>
  <tr>
    <th></th>
    <th>Minumum value</th>
    <th>Maximum value</th>
  </tr>
  <tr>
    <td>Signed</td>
    <td>-2147483648</td>
    <td>2147483647</td>
  </tr>
  <tr>
    <td>Unsigned</td>
    <td>0</td>
    <td>4294967295</td>
  </tr>
</table>

</blockquote>
<ul>
<li>product table</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>&nbsp;AUTO_INCREMENT,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>code`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>title`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>200</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>description`</span></span><span>&nbsp;</span><span class="storage type sql"><span>TEXT</span></span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>code_index`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>code`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>title_index`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>title`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>))</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB;</span></span></div></pre>
<ul>
<li>a product belongs to many categories</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>category_has_product`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>category_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>category_id`</span></span><span>,&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_id`</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_category_has_product_product_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_category_has_product_category_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>category_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_category_has_product_category`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>category_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>category`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_category_has_product_product`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION)</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB</span></span></div><div class="line"><span class="source sql"><span>DEFAULT&nbsp;CHARACTER&nbsp;</span><span class="keyword other DML sql"><span>SET</span></span><span>&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;utf8</span></span></div><div class="line"><span class="source sql"><span>COLLATE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;utf8_general_ci;</span></span></div></pre>
<ul>
<li>warehouse table</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>warehouse`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>&nbsp;AUTO_INCREMENT,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>name`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>address`</span></span><span>&nbsp;</span><span class="storage type sql"><span>TEXT</span></span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>))</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB;</span></span></div></pre>
<ul>
<li>a product can be present in many warehouses but with different quantities</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>warehouse_has_product`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>warehouse_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>quantity`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>11</span></span><span>)&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>warehouse_id`</span></span><span>,&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_id`</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_warehouse_has_product_product_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_warehouse_has_product_warehouse_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>warehouse_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_warehouse_has_product_warehouse`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>warehouse_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>warehouse`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_warehouse_has_product_product1`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION)&nbsp;ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB;</span></span></div></pre>
<ul>
<li>a product can be put in sale for a specific period with a given sale price</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_sale`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>&nbsp;AUTO_INCREMENT,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>active`</span></span><span>&nbsp;</span><span class="storage type sql"><span>TINYINT</span></span><span>(</span><span class="constant numeric sql"><span>4</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>start_date`</span></span><span>&nbsp;DATETIME&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>end_date`</span></span><span>&nbsp;DATETIME&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>price`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>11</span></span><span>)&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_product_sale_product_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>start_date_index`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>start_date`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>end_date_index`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>end_date`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_product_sale_product`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION)&nbsp;ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB;</span></span></div></pre>
<blockquote>
<p>When working with MySQL prefer DATETIME above TMESTAMP. TMESTAMP has nothing more than DATETIME, however it has some drowbacks like having a maximum value of 2038-01-09 03:14:07 UTC</p>
</blockquote>
<p><br></p>
<ul>
<li>vendor table</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>vendor`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>&nbsp;AUTO_INCREMENT,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>name`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>))</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB</span></span></div><div class="line"><span class="source sql"><span>DEFAULT&nbsp;CHARACTER&nbsp;</span><span class="keyword other DML sql"><span>SET</span></span><span>&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;utf8</span></span></div><div class="line"><span class="source sql"><span>COLLATE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;utf8_general_ci;</span></span></div></pre>
<ul>
<li>product_acquisition table</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_acquisition`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>&nbsp;AUTO_INCREMENT,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>date`</span></span><span>&nbsp;DATETIME&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>quantity`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>11</span></span><span>)&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>price`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>11</span></span><span>)&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>vendor_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_product_acquisition_vendor_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>vendor_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_product_acquisition_product_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>date_index`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>date`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_product_acquisition_vendor`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>vendor_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>vendor`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_product_acquisition_product`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION)</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB;</span></span></div></pre>
<blockquote>
<p>Use Integer types for money. You may be tempted to use database&#39;s money type or floating point numbers to store money values, don&#39;t. At best you are coupling yourself to a specific database and/or a specific platform. At worst you may have precision leacks that may be extremly hard to debug.</p>
</blockquote>
<p><br></p>
<ul>
<li>contact table</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>contact`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>&nbsp;AUTO_INCREMENT,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>name`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>email`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>mobile_phone`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>phone`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>))</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB;</span></span></div></pre>
<p><br></p>
<ul>
<li>account table</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>account`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>&nbsp;AUTO_INCREMENT,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>login`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>password`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>100</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>email`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>active`</span></span><span>&nbsp;</span><span class="storage type sql"><span>TINYINT</span></span><span>(</span><span class="constant numeric sql"><span>4</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>login_index`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>login`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>password_index`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>password`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>))</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB;</span></span></div></pre>
<p><br></p>
<ul>
<li>customer table</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>customer`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>&nbsp;AUTO_INCREMENT,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>account_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>contact_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_customer_account_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>account_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_customer_contact_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>contact_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_customer_account`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>account_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>account`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_customer_contact`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>contact_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>contact`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION)</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB</span></span></div><div class="line"><span class="source sql"><span>DEFAULT&nbsp;CHARACTER&nbsp;</span><span class="keyword other DML sql"><span>SET</span></span><span>&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;utf8</span></span></div><div class="line"><span class="source sql"><span>COLLATE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;utf8_general_ci;</span></span></div></pre>
<p><br><br></p>
<ul>
<li>country table</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>country`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>&nbsp;AUTO_INCREMENT,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>code`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>5</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>name`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>))</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB;</span></span></div></pre>
<p><br></p>
<ul>
<li>address table</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>address`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>&nbsp;AUTO_INCREMENT,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>name`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>city`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>street_name`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>street_number`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>building`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>entrance`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>number`</span></span><span>&nbsp;</span><span class="storage type sql"><span>VARCHAR</span></span><span>(</span><span class="constant numeric sql"><span>45</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>deleted`</span></span><span>&nbsp;</span><span class="storage type sql"><span>TINYINT</span></span><span>(</span><span class="constant numeric sql"><span>4</span></span><span>)</span><span>&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="constant numeric sql"><span>0</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>country_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_address_country_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>country_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_address_country`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>country_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>country`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION)</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB;</span></span></div></pre>
<blockquote>
<p><strong>deleted</strong> column will be used to achive what is called a <em>soft delete</em>. That is to update the deleted column value instead of issuing a DELETE query.</p>
</blockquote>
<p><br></p>
<ul>
<li>a customer can have many addresses</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>customer_has_address`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>customer_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>address_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>customer_id`</span></span><span>,&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>address_id`</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_customer_has_address_address_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>address_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_customer_has_address_customer_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>customer_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_customer_has_address_customer`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>customer_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>customer`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_customer_has_address_address`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>address_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>address`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION)</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB;</span></span></div></pre>
<p><br><br><br><br><br></p>
<ul>
<li>order table</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>order`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>&nbsp;AUTO_INCREMENT,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>status`</span></span><span>&nbsp;</span><span class="storage type sql"><span>SMALLINT</span></span><span>(</span><span class="constant numeric sql"><span>5</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>create_date`</span></span><span>&nbsp;DATETIME&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>customer_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_order_customer_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>customer_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_order_customer`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>customer_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>customer`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION)</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB</span></span></div><div class="line"><span class="source sql"><span>DEFAULT&nbsp;CHARACTER&nbsp;</span><span class="keyword other DML sql"><span>SET</span></span><span>&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;utf8</span></span></div><div class="line"><span class="source sql"><span>COLLATE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;utf8_general_ci;</span></span></div></pre>
<p><br></p>
<blockquote>
<p>Don&#39;t add indexes on low cardinality columns. For the moment, we can think of a handful <em>status</em> an order can have (new, delivered, cancelled..). We can also have a long sight and think about dozens of possible values. It is very unlinkly however, that an order can have thousands or even hundreds of possible status. Adding an index on this column will increase INSERT and UPDATE queries execution time without noticeably speeding up the SELECT queries.</p>
</blockquote>
<p><br></p>
<ul>
<li>an order has many product_sales with different quantities</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="meta create sql"><span class="keyword other create sql"><span>CREATE</span></span><span>&nbsp;</span><span class="keyword other sql"><span>TABLE</span></span><span>&nbsp;</span><span class="entity name function sql"><span>IF</span></span></span><span>&nbsp;NOT&nbsp;EXISTS&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>order_product_line`</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>&nbsp;AUTO_INCREMENT,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>order_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_sale_id`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>10</span></span><span>)&nbsp;UNSIGNED&nbsp;</span><span class="keyword other DDL create II sql"><span>NOT&nbsp;NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>quantity`</span></span><span>&nbsp;</span><span class="storage type sql"><span>INT</span></span><span>(</span><span class="constant numeric sql"><span>11</span></span><span>)&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>&nbsp;DEFAULT&nbsp;</span><span class="keyword other DDL create II sql"><span>NULL</span></span><span>,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>PRIMARY&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_order_product_line_order_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>order_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;INDEX&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_order_product_line_product_sale_idx`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_sale_id`</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>ASC</span></span><span>),</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_order_product_line_order`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>order_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>order`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;</span><span class="storage modifier sql"><span>CONSTRAINT</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>fk_order_product_line_product_sale`</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>FOREIGN&nbsp;KEY</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_sale_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>REFERENCES</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>product_sale`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier sql"><span>ON&nbsp;DELETE</span></span><span>&nbsp;NO&nbsp;ACTION</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>UPDATE</span></span><span>&nbsp;NO&nbsp;ACTION)</span></span></div><div class="line"><span class="source sql"><span>ENGINE&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;InnoDB;</span></span></div></pre>
<p><br>
A global view of the database schema</p>
<p><img src="/home/skafandri/projects/sb/schema1.png" alt="database schema"></p>
<p><br><br><br><br><br><br></p>
<h2 id="3-2-doctrine">3.2 Doctrine</h2>
<h3 id="3-2-1-orm">3.2.1 ORM</h3>
<p>An ORM (Object Relational Mapping) abstracts the data table details and specific database implementations. It exposes objects that the programmer can use like any traditionnal object.
For this course, we are going to use Doctrine ORM. Doctrine ORM is the default ORM that comes with the standard Symfony application.</p>
<p>Before proceeding make sure you created the database structure. Also make sure that your database details in app/config/parameters.yml are correct.</p>
<h3 id="3-2-2-command-line">3.2.2 Command line</h3>
<p>The doctrine bundle comes with a set of commands to help you increase your productivity. We will start by importing the database schema we just created into our application.</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span>$&nbsp;app/console&nbsp;doctrine:mapping:import&nbsp;AppBundle&nbsp;annotation</span></span></div><div class="line"><span class="source shell"><span>Importing&nbsp;mapping&nbsp;information&nbsp;from&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>default</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span>&nbsp;entity&nbsp;manager</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;writing&nbsp;/home/symfony-tutorial/src/AppBundle/Entity/Account.php</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;writing&nbsp;/home/symfony-tutorial/src/AppBundle/Entity/Address.php</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;writing&nbsp;/home/symfony-tutorial/src/AppBundle/Entity/Category.php</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;writing&nbsp;/home/symfony-tutorial/src/AppBundle/Entity/Contact.php</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;writing&nbsp;/home/symfony-tutorial/src/AppBundle/Entity/Country.php</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;writing&nbsp;/home/symfony-tutorial/src/AppBundle/Entity/Customer.php</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;writing&nbsp;/home/symfony-tutorial/src/AppBundle/Entity/Order.php</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;writing&nbsp;/home/symfony-tutorial/src/AppBundle/Entity/OrderProductLine.php</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;writing&nbsp;/home/symfony-tutorial/src/AppBundle/Entity/Product.php</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;writing&nbsp;/home/symfony-tutorial/src/AppBundle/Entity/ProductAcquisition.php</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;writing&nbsp;/home/symfony-tutorial/src/AppBundle/Entity/ProductSale.php</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;writing&nbsp;/home/symfony-tutorial/src/AppBundle/Entity/Vendor.php</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;writing&nbsp;/home/symfony-tutorial/src/AppBundle/Entity/Warehouse.php</span></span></div></pre>
<p>The mapping informations were generated as annotations because we invoked the command with format argument <strong>annotation</strong>.
You can delete the generated entities and experiment importing mapping informations with different formats (yaml, xml, PHP) to see the differences.
I recommand using annotations for mapping informations because it gives a greater code readibility.</p>
<blockquote>
<p>Use annotations for mapping informations.
<br></p>
</blockquote>
<p>The generated entities are simple classes with private members. We can also automatically generate members accessors for those entities.</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span>$&nbsp;app/console&nbsp;doctrine:generate:entities&nbsp;AppBundle&nbsp;--no-backup</span></span></div><div class="line"><span class="source shell"><span>Generating&nbsp;entities&nbsp;</span><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>for</span></span><span>&nbsp;</span><span class="variable other loop shell"><span>bundle</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>AppBundle</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;generating&nbsp;AppBundle</span><span class="constant character escape shell"><span>\E</span></span><span>ntity</span><span class="constant character escape shell"><span>\V</span></span><span>endor</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;generating&nbsp;AppBundle</span><span class="constant character escape shell"><span>\E</span></span><span>ntity</span><span class="constant character escape shell"><span>\W</span></span><span>arehouse</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;generating&nbsp;AppBundle</span><span class="constant character escape shell"><span>\E</span></span><span>ntity</span><span class="constant character escape shell"><span>\C</span></span><span>ontact</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;generating&nbsp;AppBundle</span><span class="constant character escape shell"><span>\E</span></span><span>ntity</span><span class="constant character escape shell"><span>\P</span></span><span>roductSale</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;generating&nbsp;AppBundle</span><span class="constant character escape shell"><span>\E</span></span><span>ntity</span><span class="constant character escape shell"><span>\O</span></span><span>rder</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;generating&nbsp;AppBundle</span><span class="constant character escape shell"><span>\E</span></span><span>ntity</span><span class="constant character escape shell"><span>\A</span></span><span>ccount</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;generating&nbsp;AppBundle</span><span class="constant character escape shell"><span>\E</span></span><span>ntity</span><span class="constant character escape shell"><span>\P</span></span><span>roductAcquisition</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;generating&nbsp;AppBundle</span><span class="constant character escape shell"><span>\E</span></span><span>ntity</span><span class="constant character escape shell"><span>\P</span></span><span>roduct</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;generating&nbsp;AppBundle</span><span class="constant character escape shell"><span>\E</span></span><span>ntity</span><span class="constant character escape shell"><span>\C</span></span><span>ategory</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;generating&nbsp;AppBundle</span><span class="constant character escape shell"><span>\E</span></span><span>ntity</span><span class="constant character escape shell"><span>\O</span></span><span>rderProductLine</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;generating&nbsp;AppBundle</span><span class="constant character escape shell"><span>\E</span></span><span>ntity</span><span class="constant character escape shell"><span>\C</span></span><span>ustomer</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;generating&nbsp;AppBundle</span><span class="constant character escape shell"><span>\E</span></span><span>ntity</span><span class="constant character escape shell"><span>\C</span></span><span>ountry</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="keyword operator redirect shell"><span>&gt;</span></span><span>&nbsp;generating&nbsp;AppBundle</span><span class="constant character escape shell"><span>\E</span></span><span>ntity</span><span class="constant character escape shell"><span>\A</span></span><span>ddress</span></span></span></div></pre>
<blockquote>
<p>Be careful when using doctrine code generators tools, and any code generators in general. Those tools can be very helpful for better productivity. You should make sure however, to perfectly understand the generated code. When problems will appear (they usually do) you will prefer to debug a code you understand rather than one that you don&#39;t.</p>
</blockquote>
<p>Based on our database schema, Doctrine generated 13 entities. Take some time to inspect the generated classes, there is no reason you would find difficulties understanding the code.</p>
<h3 id="3-2-3-working-with-data">3.2.3 Working with data</h3>
<p>Let&#39;s update our controller to fetch the data from the database.</p>
<ul>
<li>Edit <strong>src/AppBundle/Controller/CatalogController.php</strong> and update getCategories method</li>
</ul>
<pre class="editor-colors lang-php"><div class="line"><span class="text html php"><span>private&nbsp;function&nbsp;getCategories()</span></span></div><div class="line"><span class="text html php"><span>{</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;$entityManager&nbsp;=&nbsp;$this-&gt;getDoctrine()-&gt;getManager();</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;$categoryRepository&nbsp;=&nbsp;$entityManager-&gt;getRepository(&#39;AppBundle:Category&#39;);</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;$categories&nbsp;=&nbsp;$categoryRepository-&gt;findAll();</span></span></div><div class="line"><span class="text html php"><span>&nbsp;</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$categories;</span></span></div><div class="line"><span class="text html php"><span>}</span></span></div></pre>
<p><br>
<code>$entityManager-&gt;getRepository(&#39;AppBundle:Category&#39;)</code> returns an entity repository.
An entity repository provides easy access to basic data retrieval operations using simple filters.
When we will need more complex operations, we will create our custom entity repositories.<br>&#39;AppBundle:Category&#39; is the repository name according to doctrine bundle naming convention (&#39;BundleName:EntityName&#39;).
If a string is between quotes in source code, it is a constant.
So we will define it as a constant and reference it whenever we need it.</p>
<p><br></p>
<ul>
<li>Edit <strong>src/AppBundle/Entity/Category.php</strong> and add the following line after the class definition<pre class="editor-colors lang-php"><div class="line"><span class="text html php"><span>const&nbsp;REPOSITORY&nbsp;=&nbsp;&#39;AppBundle:Category&#39;;</span></span></div></pre>
</li>
</ul>
<p><br></p>
<ul>
<li>Edit <strong>src/AppBundle/Controller/CatalogController.php</strong> and change in getCategories<pre class="editor-colors lang-php"><div class="line"><span class="text html php"><span>$categoryRepository&nbsp;=&nbsp;$entityManager-&gt;getRepository(&#39;AppBundle:Category&#39;);</span></span></div></pre>
to<pre class="editor-colors lang-php"><div class="line"><span class="text html php"><span>$categoryRepository&nbsp;=&nbsp;$entityManager-&gt;getRepository(Category::REPOSITORY);</span></span></div></pre>
Don&#39;t forget to add a use statement for the Category class<pre class="editor-colors lang-php"><div class="line"><span class="text html php"><span>use&nbsp;AppBundle\Entity\Category;</span></span></div></pre>
</li>
</ul>
<p><br><br><br><br>
Let&#39;s insert some data in the database to have something visible.</p>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>INSERT&nbsp;INTO</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>category`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>,&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>label`</span></span><span>)&nbsp;</span><span class="keyword other DML II sql"><span>VALUES</span></span><span>&nbsp;(</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>1&#39;</span></span><span>,&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>Computers&#39;</span></span><span>);</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>INSERT&nbsp;INTO</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>category`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>,&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>label`</span></span><span>)&nbsp;</span><span class="keyword other DML II sql"><span>VALUES</span></span><span>&nbsp;(</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>2&#39;</span></span><span>,&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>Phones&#39;</span></span><span>);</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>INSERT&nbsp;INTO</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>category`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>,&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>label`</span></span><span>)&nbsp;</span><span class="keyword other DML II sql"><span>VALUES</span></span><span>&nbsp;(</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>3&#39;</span></span><span>,&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>Tablets&#39;</span></span><span>);</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>INSERT&nbsp;INTO</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>category`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>,&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>label`</span></span><span>,&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>parent_category_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML II sql"><span>VALUES</span></span><span>&nbsp;(</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>4&#39;</span></span><span>,&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>Desktop&#39;</span></span><span>,&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>1&#39;</span></span><span>);</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>INSERT&nbsp;INTO</span></span><span>&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>symfony`</span></span><span>.</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>category`</span></span><span>&nbsp;(</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>id`</span></span><span>,&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>label`</span></span><span>,&nbsp;</span><span class="string quoted other backtick sql"><span class="punctuation definition string begin sql"><span>`</span></span><span>parent_category_id`</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML II sql"><span>VALUES</span></span><span>&nbsp;(</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>5&#39;</span></span><span>,&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>Laptop&#39;</span></span><span>,&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>1&#39;</span></span><span>);</span></span></div></pre>
<p><br></p>
<p>Now if you visit <a href="http://127.0.0.1:8000/catalog/category/list">http://127.0.0.1:8000/catalog/category/list</a> you should see the same list of categories but now they are fetched from the database.  </p>
<p>If you visit <a href="http://127.0.0.1:8000/catalog/category/show/1">http://127.0.0.1:8000/catalog/category/show/1</a> you should see an error message.</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>Method&nbsp;&quot;parent&quot;&nbsp;for&nbsp;object&nbsp;&quot;AppBundle\Entity\Category&quot;</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>does&nbsp;not&nbsp;exist&nbsp;in&nbsp;catalog/category/show.html.twig&nbsp;at&nbsp;line&nbsp;14</span></span></span></div></pre><p><br></p>
<p>That&#39;s because when we changed the data structure that the controller used to send to TWIG templates.<br>We will just update our templates to deal with the new format.  </p>
<ul>
<li>Edit <strong>app/Resources/views/catalog/category/show.html.twig</strong> and replace <code>category.parent</code> with <code>category.parentCategory</code></li>
</ul>
<p>Now if you visit <a href="http://127.0.0.1:8000/catalog/category/show/1">http://127.0.0.1:8000/catalog/category/show/1</a> you should see it working.</p>
<p><br></p>
<p>We need to fix the edit view the same way</p>
<ul>
<li>Edit <strong>app/Resources/views/catalog/category/edit-ajax.html.twig</strong> and replace <code>category.parent</code> with <code>category.parentCategory</code></li>
</ul>
<p>Now if you visit <a href="http://127.0.0.1:8000/catalog/category/edit/1">http://127.0.0.1:8000/catalog/category/edit/1</a> you should see it working.</p>
<p><br><br><br><br><br>
<br><br><br><br><br><br></p>
<p>One more thing to fix, the tree view.</p>
<ul>
<li>Edit <strong>src/AppBundle/Controller/CatalogController.php</strong> and update the buildTree method</li>
</ul>
<pre class="editor-colors lang-php"><div class="line"><span class="text html php"><span>private&nbsp;function&nbsp;buildTree(array&nbsp;$categories,&nbsp;$parentId&nbsp;=&nbsp;null)</span></span></div><div class="line"><span class="text html php"><span>{</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;$tree&nbsp;=&nbsp;array();</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($categories&nbsp;as&nbsp;$category)&nbsp;{</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parentNode&nbsp;=&nbsp;!$parentId&nbsp;</span><span class="invalid illegal bad-ampersand html"><span>&amp;</span><span>&amp;</span></span><span>&nbsp;!$category-&gt;getParentCategory();</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$childNode&nbsp;=&nbsp;$parentId&nbsp;</span><span class="invalid illegal bad-ampersand html"><span>&amp;</span><span>&amp;</span></span><span>&nbsp;$category-&gt;getParentCategory()&nbsp;</span><span class="invalid illegal bad-ampersand html"><span>&amp;</span><span>&amp;</span></span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$category-&gt;getParentCategory()-&gt;getId()&nbsp;===&nbsp;$parentId;</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($parentNode&nbsp;||&nbsp;$childNode)&nbsp;{</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$children&nbsp;=&nbsp;$this-&gt;buildTree($categories,&nbsp;$category-&gt;getId());</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tree[$category-&gt;getId()]&nbsp;=&nbsp;array(</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;category&#39;&nbsp;=&gt;&nbsp;$category,</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;children&#39;&nbsp;=&gt;&nbsp;$children</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$tree;</span></span></div><div class="line"><span class="text html php"><span>}</span></span></div></pre>
<ul>
<li>Update <strong>app/Resources/views/catalog/category/tree-node.html.twig</strong></li>
</ul>
<pre class="editor-colors lang-html"><div class="line"><span class="text html basic"><span>{%&nbsp;set&nbsp;children&nbsp;=&nbsp;category.children&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;set&nbsp;category&nbsp;=&nbsp;category.category&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;set&nbsp;showUrl&nbsp;=&nbsp;path(</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&#39;catalog_category_show&#39;,&nbsp;{&#39;categoryId&#39;:&nbsp;category.id})</span></span></div><div class="line"><span class="text html basic"><span>%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;set&nbsp;editUrl&nbsp;=&nbsp;path(</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&#39;catalog_category_edit_ajax&#39;,&nbsp;{&#39;categoryId&#39;:&nbsp;category.id})</span></span></div><div class="line"><span class="text html basic"><span>%}</span></span></div><div class="line"><span class="text html basic"><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>li</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>style</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>float:&nbsp;left</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>a</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>href</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>{{&nbsp;showUrl&nbsp;}}</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>{{&nbsp;category.label&nbsp;}}</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>a</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>style</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>float:&nbsp;right</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>a</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>href</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>{{&nbsp;editUrl&nbsp;}}</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>ui-button&nbsp;button&nbsp;link-dialog</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>Edit</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>a</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;if&nbsp;children&nbsp;is&nbsp;not&nbsp;empty&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>ul</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>style</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>width:&nbsp;200px</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;for&nbsp;child&nbsp;in&nbsp;children&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;include&nbsp;&#39;catalog/category/tree-node.html.twig&#39;</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;{category:child}&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;endfor&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>ul</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;endif&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>style</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>clear:&nbsp;both</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>div</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>li</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre>
<p>Now the tree view <a href="http://127.0.0.1:8000/catalog/category/tree">http://127.0.0.1:8000/catalog/category/tree</a> should be working.</p>
<h2 id="3-3-crud">3.3 CRUD</h2>
<h3 id="3-3-1-introduction">3.3.1 Introduction</h3>
<p>In the last chapter we created views, routes and controller actions to manipulate categories.
In this chapter we even made it partially work with the database.
CRUD (create, read, update and delete) operations implementation is usually straight forward. Is just kind of boring because is repetitive.</p>
<p>Next, we will work with CRUD generation command. But first, let&#39;s clean up the files we don&#39;t need anymore.</p>
<p>Before you proceed, commit any uncommited changes.</p>
<ul>
<li>Remove <strong>app/Resources/views/catalog</strong></li>
<li>Remove <strong>src/AppBundle/Resources/config/routing/catalog.yml</strong></li>
<li>Remove <strong>src/AppBundle/Controller/CatalogController.php</strong></li>
<li>Edit <strong>app/config/routing.yml</strong><pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>app:</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;</span><span class="meta paragraph text"><span>resource:&nbsp;&quot;@AppBundle/Resources/config/routing.yml&quot;</span></span></span></div></pre></li>
<li>Edit <strong>app/Resources/views/common/app.html.twig</strong>
remove the link in the <em>footer</em> block</li>
</ul>
<p><strong>What happens if I don&#39;t delete those files?</strong> If you don&#39;t remove those files nothing will happen, your code will execute just fine.
However, leaving unused files is a very bad practice. In time, you can end up with hundreds or thousands of unused files, and it will become harder and harder to find them.</p>
<p>Once I started working on a project that consists in porting a piece of software from one platform to another.
The code base was in c++, had about 50.000 lines of code spread through about 100 files.<br>Before starting studying the software behaviour and internals, I did some <em>cleaning</em>, including unused files, commented code, and unreachable code.</p>
<p>I ended up with about 35.000 lines of code and 70 files. I just saved myself the pain of trying to understand about 15.000 lines of code that were never executed.</p>
<blockquote>
<p>Never leave unused files in your working tree</p>
</blockquote>
<h3 id="3-3-2-crud-templates">3.3.2 CRUD templates</h3>
<p>The <strong>doctrine:generate:crud</strong> can generate: views, routes and actions. Every generated file is based on a template.
There are default templates but they can be overridden by placing custom templates in one of the following locations, by order of priority:</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span>&nbsp;</span><span class="meta paragraph text"><span>BUNDLE_PATH/Resources/SensioGeneratorBundle/skeleton/crud</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;APP_PATH/Resources/SensioGeneratorBundle/skeleton/crud</span></span></span></div></pre><p>To make our view fit in the design we adopted, we will define new views templates.</p>
<ul>
<li><strong>app/Resources/SensioGeneratorBundle/skeleton/crud/views/index.html.twig.twig</strong></li>
</ul>
<pre class="editor-colors lang-html"><div class="line"><span class="text html basic"><span>{%&nbsp;block&nbsp;extends&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;extends&nbsp;&#39;common/app.html.twig&#39;&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;endblock&nbsp;extends&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;block&nbsp;body&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;block&nbsp;header%}&quot;&nbsp;}}</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>h1</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>{{&nbsp;entity&nbsp;}}&nbsp;list</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>h1</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>{{&nbsp;&quot;{%&nbsp;endblock&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;block&nbsp;content%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>table</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>records_list</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>thead</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>tr</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;for&nbsp;field,&nbsp;metadata&nbsp;in&nbsp;fields&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>th</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>{{&nbsp;field|capitalize&nbsp;}}</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>th</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;endfor&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>th</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>Actions</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>th</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>tr</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>thead</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>tbody</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&#39;{%&nbsp;for&nbsp;entity&nbsp;in&nbsp;entities&nbsp;%}&#39;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>tr</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;for&nbsp;field,&nbsp;metadata&nbsp;in&nbsp;fields&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;if&nbsp;loop.first&nbsp;and&nbsp;(&#39;show&#39;&nbsp;in&nbsp;actions)&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>td</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>a</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>href</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>{{&nbsp;</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>{{&nbsp;</span><span class="entity other attribute-name html"><span>path</span></span><span>(</span><span class="string quoted single html"><span class="punctuation definition string begin html"><span>&#39;</span></span><span>&quot;&nbsp;~&nbsp;route_name_prefix&nbsp;~</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag inline any html"><span class="string quoted single html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;_show</span><span class="punctuation definition string end html"><span>&#39;</span></span></span><span>,&nbsp;{&nbsp;</span><span class="string quoted single html"><span class="punctuation definition string begin html"><span>&#39;</span></span><span>id</span><span class="punctuation definition string end html"><span>&#39;</span></span></span><span>:&nbsp;</span><span class="entity other attribute-name html"><span>entity</span></span><span>.</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>~&nbsp;identifier&nbsp;~</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;})&nbsp;}}</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>&nbsp;}}</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&#39;{{&nbsp;entity.&#39;&nbsp;~&nbsp;field|replace({&#39;_&#39;:&nbsp;&#39;&#39;})&nbsp;~&nbsp;&#39;&nbsp;}}&#39;&nbsp;}}</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>a</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>td</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;elseif&nbsp;metadata.type&nbsp;in&nbsp;[&#39;date&#39;,&nbsp;&#39;datetime&#39;]&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>td</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>{{&nbsp;&#39;{%&nbsp;if&nbsp;entity.&#39;&nbsp;~&nbsp;field|replace({&#39;_&#39;:&nbsp;&#39;&#39;})&nbsp;~&nbsp;&#39;&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;entity.&#39;&nbsp;~&nbsp;field|replace({&#39;_&#39;:&nbsp;&#39;&#39;})&nbsp;~</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;|date(\&#39;Y-m-d&nbsp;H:i:s\&#39;)&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;endif&nbsp;%}&#39;&nbsp;}}</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>td</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;else&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>td</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>{{&nbsp;&#39;{{&nbsp;entity.&#39;&nbsp;~&nbsp;field|replace({&#39;_&#39;:&nbsp;&#39;&#39;})&nbsp;~&nbsp;&#39;&nbsp;}}&#39;&nbsp;}}</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>td</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;endif&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;if&nbsp;loop.last&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>td</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;include&nbsp;&quot;crud/views/others/actions.html.twig.twig&quot;&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>td</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;endif&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;endfor&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>tr</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&#39;{%&nbsp;endfor&nbsp;%}&#39;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>tbody</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>table</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;if&nbsp;&#39;new&#39;&nbsp;in&nbsp;actions&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>a</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>button</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>href</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>{{&nbsp;</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>{{&nbsp;</span><span class="entity other attribute-name html"><span>path</span></span><span>(</span><span class="string quoted single html"><span class="punctuation definition string begin html"><span>&#39;</span></span><span>&quot;&nbsp;~&nbsp;route_name_prefix&nbsp;~&nbsp;&quot;_new</span><span class="punctuation definition string end html"><span>&#39;</span></span></span><span>)&nbsp;}}</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>&nbsp;}}</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New&nbsp;{{&nbsp;entity&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>a</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;endif&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;endblock&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;endblock&nbsp;body&nbsp;%}</span></span></div></pre>
<p><br></p>
<ul>
<li><strong>app/Resources/SensioGeneratorBundle/skeleton/crud/views/new.html.twig.twig</strong></li>
</ul>
<pre class="editor-colors lang-html"><div class="line"><span class="text html basic"><span>{%&nbsp;block&nbsp;extends&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;extends&nbsp;&#39;common/app.html.twig&#39;&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;endblock&nbsp;extends&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;block&nbsp;body&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;block&nbsp;header%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>h1</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>New&nbsp;{{&nbsp;entity&nbsp;}}</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>h1</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;endblock&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;block&nbsp;content&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&#39;{{&nbsp;form(form)&nbsp;}}&#39;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;set&nbsp;hide_edit,&nbsp;hide_delete&nbsp;=&nbsp;true,&nbsp;true&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;include&nbsp;&#39;crud/views/others/record_actions.html.twig.twig&#39;&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;endblock&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;endblock&nbsp;body&nbsp;%}</span></span></div></pre>
<p><br></p>
<ul>
<li><strong>app/Resources/SensioGeneratorBundle/skeleton/crud/views/edit.html.twig.twig</strong></li>
</ul>
<pre class="editor-colors lang-html"><div class="line"><span class="text html basic"><span>{%&nbsp;block&nbsp;extends&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;extends&nbsp;&#39;common/app.html.twig&#39;&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;endblock&nbsp;extends&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;block&nbsp;body&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;block&nbsp;header&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>h1</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>{{&nbsp;entity&nbsp;}}&nbsp;edit</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>h1</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;endblock&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;block&nbsp;content&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&#39;{{&nbsp;form(edit_form)&nbsp;}}&#39;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;set&nbsp;hide_edit,&nbsp;hide_delete&nbsp;=&nbsp;true,&nbsp;false&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;include&nbsp;&#39;crud/views/others/record_actions.html.twig.twig&#39;&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;endblock&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;endblock&nbsp;body&nbsp;%}</span></span></div></pre>
<p><br><br><br><br><br>
<br><br><br><br><br></p>
<ul>
<li><strong>app/Resources/SensioGeneratorBundle/skeleton/crud/views/show.html.twig.twig</strong></li>
</ul>
<pre class="editor-colors lang-html"><div class="line"><span class="text html basic"><span>{%&nbsp;block&nbsp;extends&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;extends&nbsp;&#39;common/app.html.twig&#39;&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;endblock&nbsp;extends&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;block&nbsp;body&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;block&nbsp;header%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>h1</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>{{&nbsp;entity&nbsp;}}</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>h1</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;endblock&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;block&nbsp;content%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>table</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>record_properties</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>tbody</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;for&nbsp;field,&nbsp;metadata&nbsp;in&nbsp;fields&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>tr</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>th</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>{{&nbsp;field|capitalize&nbsp;}}</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>th</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;if&nbsp;metadata.type&nbsp;in&nbsp;[&#39;date&#39;,&nbsp;&#39;datetime&#39;]&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>td</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>{{&nbsp;&#39;{{&nbsp;entity.&#39;&nbsp;~&nbsp;field|replace({&#39;_&#39;:&nbsp;&#39;&#39;})&nbsp;~</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;|date(\&#39;Y-m-d&nbsp;H:i:s\&#39;)&nbsp;}}&#39;&nbsp;}}</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>td</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;else&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>td</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&#39;{{&nbsp;entity.&#39;&nbsp;~&nbsp;field|replace({&#39;_&#39;:&nbsp;&#39;&#39;})&nbsp;~&nbsp;&#39;&nbsp;}}&#39;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>td</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;endif&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>tr</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;endfor&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>tbody</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>table</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;set&nbsp;hide_edit,&nbsp;hide_delete&nbsp;=&nbsp;false,&nbsp;false&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;include&nbsp;&#39;crud/views/others/record_actions.html.twig.twig&#39;&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&quot;{%&nbsp;endblock&nbsp;%}&quot;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>{%&nbsp;endblock&nbsp;body&nbsp;%}</span></span></div></pre>
<ul>
<li><strong>app/Resources/SensioGeneratorBundle/skeleton/crud/views/others/actions.html.twig.twig</strong></li>
</ul>
<pre class="editor-colors lang-html"><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>actions</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;for&nbsp;action&nbsp;in&nbsp;record_actions&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>a</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>button</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>href</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>{{&nbsp;</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>{{&nbsp;</span><span class="entity other attribute-name html"><span>path</span></span><span>(</span><span class="string quoted single html"><span class="punctuation definition string begin html"><span>&#39;</span></span><span>&quot;&nbsp;~&nbsp;route_name_prefix&nbsp;~&nbsp;&quot;_&quot;&nbsp;~</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag inline any html"><span class="string quoted single html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;action&nbsp;~&nbsp;&quot;</span><span class="punctuation definition string end html"><span>&#39;</span></span></span><span>,&nbsp;{&nbsp;</span><span class="string quoted single html"><span class="punctuation definition string begin html"><span>&#39;</span></span><span>id</span><span class="punctuation definition string end html"><span>&#39;</span></span></span><span>:&nbsp;</span><span class="entity other attribute-name html"><span>entity</span></span><span>.</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>~&nbsp;identifier&nbsp;~</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;})&nbsp;}}</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>&nbsp;}}</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;action&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>a</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%-&nbsp;endfor&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre>
<p><br><br><br><br></p>
<ul>
<li><strong>app/Resources/SensioGeneratorBundle/skeleton/crud/views/others/record_actions.html.twig.twig</strong></li>
</ul>
<pre class="editor-colors lang-html"><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>record-actions</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>a</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>button</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>href</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>{{&nbsp;</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>{{&nbsp;</span><span class="entity other attribute-name html"><span>path</span></span><span>(</span><span class="string quoted single html"><span class="punctuation definition string begin html"><span>&#39;</span></span><span>&quot;&nbsp;~&nbsp;route_name_prefix&nbsp;~&nbsp;&quot;</span><span class="punctuation definition string end html"><span>&#39;</span></span></span><span>)&nbsp;}}</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>&nbsp;}}</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Back&nbsp;to&nbsp;the&nbsp;list</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>a</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;if&nbsp;(&#39;edit&#39;&nbsp;in&nbsp;actions)&nbsp;and&nbsp;(not&nbsp;hide_edit)&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>a</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>button</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>href</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>{{&nbsp;</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>{{&nbsp;</span><span class="entity other attribute-name html"><span>path</span></span><span>(</span><span class="string quoted single html"><span class="punctuation definition string begin html"><span>&#39;</span></span><span>&quot;&nbsp;~&nbsp;route_name_prefix&nbsp;~&nbsp;&quot;_edit</span><span class="punctuation definition string end html"><span>&#39;</span></span></span><span>,</span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag inline any html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;</span><span class="string quoted single html"><span class="punctuation definition string begin html"><span>&#39;</span></span><span>id</span><span class="punctuation definition string end html"><span>&#39;</span></span></span><span>:&nbsp;</span><span class="entity other attribute-name html"><span>entity</span></span><span>.</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>~&nbsp;identifier&nbsp;~</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;})&nbsp;}}</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>&nbsp;}}</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Edit</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>a</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;endif&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;if&nbsp;(&#39;delete&#39;&nbsp;in&nbsp;actions)&nbsp;and&nbsp;(not&nbsp;hide_delete)&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>style</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>float:left</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&#39;{{&nbsp;form(delete_form)&nbsp;}}&#39;&nbsp;}}</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>style</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>clear:both</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>div</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;{%&nbsp;endif&nbsp;%}</span></span></div><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre>
<p><br></p>
<blockquote>
<p>If you want to check the original templates that we just override, check vendor/sensio/generator-bundle/Sensio/Bundle/GeneratorBundle/Resources/skeleton</p>
</blockquote>
<p>Done, we are now ready to start generating CRUD operations.</p>
<p><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br>
<br><br><br><br><br><br><br></p>
<h3 id="3-3-3-crud-generate-command">3.3.3 CRUD generate command</h3>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span>$&nbsp;app/console&nbsp;doctrine:generate:crud&nbsp;--format=yml&nbsp;--with-write&nbsp;AppBundle:Category</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>&nbsp;&nbsp;Welcome&nbsp;to&nbsp;the&nbsp;Doctrine2&nbsp;CRUD&nbsp;generator&nbsp;&nbsp;</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>This&nbsp;</span><span class="support function builtin shell"><span>command</span></span><span>&nbsp;helps&nbsp;you&nbsp;generate&nbsp;CRUD&nbsp;controllers&nbsp;and&nbsp;templates.</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>First,&nbsp;you&nbsp;need&nbsp;to&nbsp;give&nbsp;the&nbsp;entity&nbsp;</span><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>for</span></span><span>&nbsp;</span><span class="variable other loop shell"><span>which</span></span><span>&nbsp;you&nbsp;want&nbsp;to&nbsp;generate&nbsp;a&nbsp;CRUD.</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>You&nbsp;can&nbsp;give&nbsp;an&nbsp;entity&nbsp;that&nbsp;does&nbsp;not&nbsp;exist&nbsp;yet&nbsp;and&nbsp;the&nbsp;wizard&nbsp;will&nbsp;</span><span class="support function builtin shell"><span>help</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>you&nbsp;defining&nbsp;it.</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>You&nbsp;must&nbsp;use&nbsp;the&nbsp;shortcut&nbsp;notation&nbsp;like&nbsp;AcmeBlogBundle:Post.</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>The&nbsp;Entity&nbsp;shortcut&nbsp;name&nbsp;[AppBundle:Category]:</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>By&nbsp;default,&nbsp;the&nbsp;generator&nbsp;creates&nbsp;two&nbsp;actions:&nbsp;list&nbsp;and&nbsp;show.</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>You&nbsp;can&nbsp;also&nbsp;ask&nbsp;it&nbsp;to&nbsp;generate&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>write</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span>&nbsp;actions:&nbsp;new,&nbsp;update,&nbsp;and&nbsp;delete.</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>Do&nbsp;you&nbsp;want&nbsp;to&nbsp;generate&nbsp;the&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>write</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span>&nbsp;actions&nbsp;[yes]</span><span class="keyword operator glob shell"><span>?</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>Determine&nbsp;the&nbsp;format&nbsp;to&nbsp;use&nbsp;</span><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>for</span></span><span>&nbsp;</span><span class="variable other loop shell"><span>the</span></span><span>&nbsp;generated&nbsp;CRUD.</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span>Configuration&nbsp;format&nbsp;</span><span class="meta scope subshell shell"><span class="punctuation definition subshell shell"><span>(</span></span><span>yml,&nbsp;xml,&nbsp;php,&nbsp;or&nbsp;annotation</span><span class="punctuation definition subshell shell"><span>)</span></span></span><span>&nbsp;[yml]:</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span>Determine&nbsp;the&nbsp;routes&nbsp;prefix&nbsp;</span><span class="meta scope subshell shell"><span class="punctuation definition subshell shell"><span>(</span></span><span>all&nbsp;the&nbsp;routes&nbsp;will&nbsp;be&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>mounted</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span>&nbsp;under&nbsp;this</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="meta scope subshell shell"><span>prefix:&nbsp;/prefix/,&nbsp;/prefix/new,&nbsp;...</span><span class="punctuation definition subshell shell"><span>)</span></span></span><span>.</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span>Routes&nbsp;prefix&nbsp;[/category]:</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;Summary&nbsp;before&nbsp;generation&nbsp;&nbsp;</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span>You&nbsp;are&nbsp;going&nbsp;to&nbsp;generate&nbsp;a&nbsp;CRUD&nbsp;controller&nbsp;</span><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>for</span></span><span>&nbsp;</span><span class="variable other loop shell"><span>&quot;AppBundle:Category</span></span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="string quoted double shell"><span>using&nbsp;the&nbsp;</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span>yml</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>&nbsp;format.</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="string quoted double shell"><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="string quoted double shell"><span>Do&nbsp;you&nbsp;confirm&nbsp;generation&nbsp;[yes]?</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="string quoted double shell"><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="string quoted double shell"><span>&nbsp;&nbsp;CRUD&nbsp;generation&nbsp;&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="string quoted double shell"><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="string quoted double shell"><span>Generating&nbsp;the&nbsp;CRUD&nbsp;code:&nbsp;OK</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="string quoted double shell"><span>Generating&nbsp;the&nbsp;Form&nbsp;code:&nbsp;OK</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="string quoted double shell"><span>Confirm&nbsp;automatic&nbsp;update&nbsp;of&nbsp;the&nbsp;Routing&nbsp;[yes]?</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="string quoted double shell"><span>Importing&nbsp;the&nbsp;CRUD&nbsp;routes:&nbsp;OK</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="string quoted double shell"><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="meta scope for-in-loop shell"><span class="string quoted double shell"><span>&nbsp;&nbsp;You&nbsp;can&nbsp;now&nbsp;start&nbsp;using&nbsp;the&nbsp;generated&nbsp;code!</span></span></span></span></span></span></div></pre>
<p><br><br><br><br><br><br></p>
<p>Done, let&#39;s see what we got.</p>
<p>The command generated:</p>
<ul>
<li><strong>src/AppBundle/Resources/config/routing/category.yml</strong> with the different CRUD routes.</li>
<li><strong>src/AppBundle/Resources/views/category/[index|show|new|edit].html.twig</strong>.</li>
<li><strong>src/AppBundle/Controller/CategoryController.php</strong> with all CRUD actions.</li>
<li><strong>src/AppBundle/Form/CategoryType.php</strong> we will talk about form types later.</li>
</ul>
<p>One more thing to make it work, our application doesn&#39;t know how to display a Category or a Product as simple text. We will add __toString methods to both entities.</p>
<ul>
<li>Edit <strong>src/AppBundle/Entity/Category.php</strong> and add this method to the end of the class</li>
</ul>
<pre class="editor-colors lang-php"><div class="line"><span class="text html php"><span>public&nbsp;function&nbsp;__toString()</span></span></div><div class="line"><span class="text html php"><span>{</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;getLabel();</span></span></div><div class="line"><span class="text html php"><span>}</span></span></div></pre>
<ul>
<li>Edit <strong>src/AppBundle/Entity/Product.php</strong> and add this method to the end of the class</li>
</ul>
<pre class="editor-colors lang-php"><div class="line"><span class="text html php"><span>public&nbsp;function&nbsp;__toString()</span></span></div><div class="line"><span class="text html php"><span>{</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;getTitle();</span></span></div><div class="line"><span class="text html php"><span>}</span></span></div></pre>
<p>You can navigate to <a href="http://127.0.0.1:8000/category/">http://127.0.0.1:8000/category/</a> to see the generated layout.</p>
<p><br><br><br></p>
<h2 id="3-4-validation">3.4 Validation</h2>
<p>Data validation is as important as difficult to perform correctly. Symfony ships with a Validator component that makes this task easier.</p>
<p>If you go <a href="http://127.0.0.1:8000/category/new">http://127.0.0.1:8000/category/new</a> you can add a new category with an empty label, which is not OK.</p>
<p>Let&#39;s see how we can prevent this by a validation constraint.</p>
<ul>
<li>Edit <strong>src/AppBundle/Entity/Category.php</strong></li>
</ul>
<p>Add the follwing to the use section</p>
<pre class="editor-colors lang-php"><div class="line"><span class="text html php"><span>use&nbsp;Symfony\Component\Validator\Constraints&nbsp;as&nbsp;Assert;</span></span></div></pre>
<p><br>
Update the <code>$label</code> annotation so it looks like:</p>
<pre class="editor-colors lang-php"><div class="line"><span class="text html php"><span>/**</span></span></div><div class="line"><span class="text html php"><span>&nbsp;*&nbsp;@var&nbsp;string</span></span></div><div class="line"><span class="text html php"><span>&nbsp;*</span></span></div><div class="line"><span class="text html php"><span>&nbsp;*&nbsp;@ORM\Column(name=&quot;label&quot;,&nbsp;type=&quot;string&quot;,&nbsp;length=45,&nbsp;nullable=true)</span></span></div><div class="line"><span class="text html php"><span>&nbsp;*&nbsp;@Assert\NotBlank(message=&quot;The&nbsp;label&nbsp;cannot&nbsp;be&nbsp;empty&quot;)</span></span></div><div class="line"><span class="text html php"><span>&nbsp;*/</span></span></div><div class="line"><span class="text html php"><span>private&nbsp;$label;</span></span></div></pre>
<p>Done, if you visit <a href="http://127.0.0.1:8000/category/new">http://127.0.0.1:8000/category/new</a> you will see even HTML5 validation added to the form.</p>
<p>We have another little problem, when you edit a category, you can set as parent the same category.<br>Let&#39;s fix it.</p>
<ul>
<li>Edit <strong>src/AppBundle/Entity/Category.php</strong> again and add the following method to the end of the class.</li>
</ul>
<pre class="editor-colors lang-php"><div class="line"><span class="text html php"><span>/**</span></span></div><div class="line"><span class="text html php"><span>&nbsp;*&nbsp;@Assert\True(message&nbsp;=&nbsp;&quot;Parent&nbsp;category&nbsp;cannot&nbsp;be&nbsp;the&nbsp;same&nbsp;as&nbsp;child&quot;)</span></span></div><div class="line"><span class="text html php"><span>&nbsp;*/</span></span></div><div class="line"><span class="text html php"><span>public&nbsp;function&nbsp;isNotSameAsParent()</span></span></div><div class="line"><span class="text html php"><span>{</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!$this-&gt;getParentCategory())&nbsp;{</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></div><div class="line"><span class="text html php"><span>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;getId()&nbsp;!==&nbsp;$this-&gt;getParentCategory()-&gt;getId();</span></span></div><div class="line"><span class="text html php"><span>}</span></span></div><div class="line"><span class="text html php"><span>`</span></span></div></pre>
<p>This was an overview of the Validator component. And we will see more features in the following chapters.</p>
<p>For a full list of the constraints list please check the <a href="http://symfony.com/doc/current/book/validation.html#supported-constraints">Symfony documentation</a></p>
<p><br><br></p>
<h2 id="3-4-homework">3.4 Homework</h2>
<ol>
<li>Generate CRUD actions for the remaining entities.</li>
<li>Add a validation constraint on Account entity that both login and password should be unique.</li>
<li>In the product listing table, add a button that pop up a dialog containing the product&#39;s acquisition history.</li>
</ol></body>
</html>
